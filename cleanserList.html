<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Skincare Master</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns"
        crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
</head>

<body>
    <!--Nav bar-->
    <div>
        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <a href="">REVIEW</a>
            <a class="inSidenav" href="">Product Type</a>
            <a class="innerSidenav" href="cleanserList.html">cleanser</a>
            <a class="innerSidenav" href="moisturizerList.html">moisturizer</a>
            <a class="innerSidenav" href="bodyLotionList.html">body lotion</a>
            <a class="inSidenav" href="">Skin Concern</a>
            <a class="innerSidenav" href="AcneList.html">Acne</a>
            <a class="innerSidenav" href="BlackheadsList.html">Blackheads</a>
            <a class="innerSidenav" href="WrinklesList.html">Wrinkles</a>
            <a href="">ARTICLE</a>
            <a class="innerSidenav" href="DIYSkincareList.html">DIY Skincare</a>
            <a class="innerSidenav" href="NutritionList.html">Nutrition</a>
            <a class="innerSidenav" href="ExpertAdviceList.html">Expert Advice</a>
            <a href="myAccountPage.html">MY ACCOUNT</a>

        </div>
        &nbsp;&nbsp;&nbsp;&nbsp;<a class="backBtn" href="javascript:history.back()"><i class="fas fa-chevron-left" style='font-size:24px'></i></a>&nbsp;&nbsp;&nbsp;
        <a class="title justify-content-center" href="#">SkincareMaster</a>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; </span>
    </div>
    <!-- Search form -->
    <div class="row justify-content-center">
            <form class="example col-10">
                <input type="text" placeholder="Search.." name="search" id="searchField">
                <button type="button"><i class="fa fa-search" onclick="search()"></i></button>
            </form>
          </div>

    <!-- sort by drop down-->

    <div class="row container-fluid justify-content-end">
        <div class="dropdown">
            <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false" id="sortByBtn">
                Sort by
            </button>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="cleanerListSort.html">Top-Rated</a>
                <a class="dropdown-item" href="cleanserList.html">Newest</a>
                <a class="dropdown-item" href="cleanserList.html">Most popular</a>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row justify-content-center" id="templatedProducts">
            <script id="entry-template" type="text/x-handlebars-template">
                    <div class="card col-5" style="margin: 0.5rem">
                        <img class="card-img-top img-fluid" src="{{picture}}" alt="#">
                        <div class="card-body" style="padding: 0rem">
                            <a href="productDetail.html?type=acne&product={{productName}}">
                                <p class="card-title font-weight-bold">{{company}}</p>
                            </a>
                            <p class="card-text text-truncate">{{productName}}</p>
                            <p class="card-text text-truncate">Rating: {{rating}}</p>
                            
                        </div>
                    </div>
            </script>
        </div>
    </div>


    <script>
        var cleanser = [
            { 'company': 'Fresh', 'productName': 'Soy Face Cleanser', 'picture': 'img/cleanser3.jpg', 'rating': 3, 'index': 1, 'fav': 30 },
            { 'company': 'PHILOSOPHY', 'productName': 'Purity Made Simple Cleanser', 'picture': 'img/cleanser4.jpg', 'rating': 3, 'index': 2, 'fav': 40 },
            { 'company': 'EVE LOM', 'productName': 'Cleanser/Traitement De Nettoyage', 'picture': 'img/cleanser1.jpg', 'rating': 3, 'index': 3, 'fav': 50 },
            { 'company': 'SK-II', 'productName': 'Facial Treatment Cleanser', 'picture': 'img/cleanser2.jpg', 'rating': 3, 'index': 4, 'fav': 60 }
        ]
        // var reviewList = [
        //     { 'rating': 5, 'comment': 'It is great I love it!' },
        //     { 'rating': 2, 'comment': 'It is just fine' },
        //     { 'rating': 3, 'comment': 'It is soso' },
        //     { 'rating': 2, 'comment': 'It is Ok' }
        // ]
        function openNav() {
            document.getElementById("mySidenav").style.width = "250px";
        }
        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
        }
        function favFunction(x) {
            x.classList.toggle("fas");

        }
        // Call this function when the page loads (the "ready" event)
        $(document).ready(function () {
            // compile the template
            var source = $("#entry-template").html();
            var template = Handlebars.compile(source);
            var parentDiv = $("#templatedProducts");
            // now iterate through the complexData list and keep appending:
            for (var i = 0; i < cleanser.length; i++) {
                var curData = cleanser[i];
                var curHtml = template(curData);
                parentDiv.append(curHtml);

            }
        });

        function search() {
            var input = document.getElementById("searchField").value;
            var productList = JSON.parse(localStorage.getItem("productList"));
            var found = false;
            for(var i = 0; i < productList.length; i++){
                var currData = productList[i];
                
                if (currData == input) {
                found = true;
                }
            }
            if(found){
                window.location = "productDetail.html?product=" + input;
            }
            else {
                alert("Sorry, item is not found :(");
            }
        }
    </script>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/handlebars-v4.0.11.js"></script>
</body>

</html>